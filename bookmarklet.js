(function() { var s = document.createElement('script'); var timeout = null; function clearCloseTimeout() { if (typeof timeout === 'number') { clearTimeout(timeout); timeout = null; } } function showMessage(message) { hideMessage(); var messageContainer = document.createElement('div'); messageContainer.id = 'aslintInitMessage'; messageContainer.style = 'position: fixed; top: 0; left: 0; right: 0; max-width: 750px; margin: 0.25em auto 0; padding: 0.25em 0.75em; border-radius: 3px; box-shadow: none; font-size: 1em; text-align: center; color: white; background: red; z-index: 999999;'; messageContainer.textContent = message; var closeButton = document.createElement('button'); closeButton.type = 'button'; closeButton.style = 'margin-left: 0.5em;background: #000;border: 1px solid #000;margin-top: 0.25em;'; closeButton.textContent = 'Close'; closeButton.onclick = function() { hideMessage(); }; messageContainer.appendChild(closeButton); document.body.appendChild(messageContainer); } function hideMessage() { var el = document.getElementById('aslintInitMessage'); if (el !== null) { el.parentNode.removeChild(el); } clearCloseTimeout(); } function loadedCallback() { } function failedCallback(err) { showMessage('Failed to load ASLint. Potential reasons: Content Security Policy or ASLint file is not reachable.'); timeout = setTimeout(function() { hideMessage(); }, 15000); } function resultsCallback(results) { console.log(results); } s.type = 'text/javascript'; s.async = true; s.src = (document.location.protocol === 'https:' ? 'https:' : 'http:') + '//www.aslint.org/api/aslint/loader/loader.js'; window.aslint = { config: { asyncRunner: true, reportFormat: { JSON: true }, resultsCallback: resultsCallback, visibleUI: true } }; if (typeof s.addEventListener === 'function') { s.addEventListener('load', loadedCallback); s.addEventListener('error', failedCallback); } document.body.appendChild(s) })();